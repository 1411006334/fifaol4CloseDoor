# fifaol4CloseDoor

这个项目是在FIFAOL4游戏中自动进行堵门（最高价购买）操作

## 简介

本项目使用的pywin32进行的自动化操作，使用PILLOW库对图像进行操作，使用pytesseract进行OCR文字识别

本项目功能主要为对fifaol4<kbd>交易市场</kbd>-><kbd>交易目录</kbd>中，第一行的球员，不停点击<kbd>再登记</kbd>，查看最高价与当前登记价格是否一致，如发生变化视为变门，自动最高价购买，购买后点击再登记然后截图，**可通过go-cqhttp将图片发送至QQ，这样，你就可以把电脑放在家里运行堵门脚本，自己出门在外也可以通过QQ查看脚本是否堵门成功以及堵门成功后是几门**

## 开始

python版本我这边是3.8

然后要通过pip下载几个库

``` shell
pip install pywin32
pip install pillow
pip install pytesseract
```

pytesseract这个是谷歌的OCR库，安装有点麻烦，请参考[pytesseract安装详情](https://www.jianshu.com/p/2db541800418)

还有就是要实现图片发送至QQ功能的话，需要一个QQ小号，使用的是[go-cqhttp](https://docs.go-cqhttp.org/)这个也是很有意思的项目。

## 注意

因为自动化根据坐标定位，是在我自己电脑上调试的缘故，本项目执行需要将**fifaol4改为窗口模式，分辨率改为1920X1080(16:9)**

交易目录里最好只留下要堵门的那个球员，如果有其他交易球员，堵门过程中出现其他球员售出，或者求购成功的情况，会导致脚本出错。

如果非要在堵门的情况下，非要有其他球员也求购或出售，**那要保证需要堵门的球员必须是交易目录第一行**，因为本项目只识别第一行哈哈哈哈

因为我要堵门的球员的刷新时间是偶数时，0分至30分之前，所以我在main.py文件中写的判断是

``` python
a = int(time.localtime()[3])%2 == 0 and int(time.localtime()[4]) == 0
```

即必须要在偶数时0分前启动脚本，到0分会自动开始堵门，例如下一个刷新时间是16:00至16:30之间，就必须要在16:00前启动脚本，最晚最晚16:00启动，16:01启动的话就无法正常开始堵门了，只能等到18:00堵了。

还有一个非常重要的点，**启动脚本后要把界面切换至FIFAOL4，否则到整点开始堵门会报错**，我也不知道为啥，原因后面再查吧，修复了会更新

堵门成功后会进行休眠等待下一个偶数时，若到30分还未进行变门，也会进入休眠

如不需要这种休眠判断，可以改为

``` python
a = 1
```

如你要堵门的球员刷新时间是奇数时0分到30分，例如13:00到13:30之间随机刷新，可以改为

``` python
a = int(time.localtime()[3]+1)%2 == 0 and int(time.localtime()[4]) == 0
```

还有就是脚本执行过程中，有时候会出现窗口混乱的情况，所以除了FIFAOL4以外，还要打开log文件夹的窗口，log文件夹的窗口打开以后最小化就行，出现混乱会切换一下。

```
![alt 属性文本](图片地址)
```

## 最后

这个脚本还很简陋，我三天前晚上写的，并且好几个库是现学的，所以运行过程中问题很多，故不推荐纯小白使用。

希望更多有python基础的fifaol4玩家一起把这个脚本完善。

本脚本是纯开源，希望不要有人打信息差，拿去骗钱了好吧。

最后最后，大家点点star！非常感谢！